services:
  spyglasses.middleware:
    class: Drupal\spyglasses\StackMiddleware\SpyglassesMiddleware
    decorates: http_kernel
    arguments: ['@spyglasses.middleware.inner', '@config.factory', '@logger.factory', '@cache.default', '@http_client']

  spyglasses.client:
    class: Drupal\spyglasses\SpyglassesClient
    arguments: ['@config.factory', '@logger.factory', '@cache.default', '@http_client']

  spyglasses.pattern_sync:
    class: Drupal\spyglasses\SpyglassesPatternSync
    arguments: ['@spyglasses.client', '@config.factory', '@logger.factory']
